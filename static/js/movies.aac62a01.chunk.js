"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[936],{6473:function(e,r,t){t.d(r,{Z:function(){return j}});var n,a,u=t(5861),i=t(885),o=t(7757),c=t.n(o),s=t(2791),p=t(168),l=t(6031),f=t(828),d=(0,l.F4)(n||(n=(0,p.Z)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(359deg);\n  }\n"]))),h=(0,l.ZP)(f.j8h)(a||(a=(0,p.Z)(["\n  display: block;\n  width: 60px;\n  height: 60px;\n  margin: 30px auto;\n  color: #7a82b5;\n\n  animation: "," 1s linear infinite;\n"])),d),v=t(184);var m,x=function(){return(0,v.jsx)(h,{})},g=l.ZP.p(m||(m=(0,p.Z)(["\n  margin: 0;\n  font-size: 20px;\n  font-weight: 400;\n"])));var w=function(e){var r=e.message;return(0,v.jsx)(g,{children:r})},b="idle",Z="pending",y="resolved",k="rejected";var j=function(e){var r=e.callback,t=e.initData,n=(0,s.useState)(b),a=(0,i.Z)(n,2),o=a[0],p=a[1],l=(0,s.useState)(t),f=(0,i.Z)(l,2),d=f[0],h=f[1],m=(0,s.useState)(null),g=(0,i.Z)(m,2),j=g[0],q=g[1];return(0,s.useEffect)((function(){(0,u.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(Z),e.prev=1,e.next=4,r();case 4:t=e.sent,h(t),p(y),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),p(k),q(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()}),[r]),{data:d,isLoaded:o===y,Loader:function(){return o===Z?(0,v.jsx)(x,{}):o===k?(0,v.jsx)(w,{message:j.message}):null}}}},2060:function(e,r,t){t.r(r),t.d(r,{default:function(){return C}});var n,a=t(5861),u=t(885),i=t(7757),o=t.n(i),c=t(2791),s=t(501),p=t(6871),l=t(4390),f=t(6473),d=t(5903),h=t(8683),v=t(4925),m=t(168),x=t(6031),g=x.ZP.ul(n||(n=(0,m.Z)(["\n  margin: 10px 0;\n  padding: 0 0 0 30px;\n"]))),w=t(184),b=["items"];var Z,y,k,j,q=function(e){var r=e.items,t=(0,v.Z)(e,b);return(0,w.jsx)(g,{children:r.map((function(e){return(0,w.jsx)("li",{children:(0,w.jsx)(s.rU,(0,h.Z)((0,h.Z)({to:e.toLink},t),{},{children:e.label}))},e.key)}))})},S=x.ZP.form(Z||(Z=(0,m.Z)(["\n  position: relative;\n  margin-bottom: 30px;\n"]))),_=x.ZP.label(y||(y=(0,m.Z)(["\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  clip-path: inset(50%);\n  border: 0;\n"]))),L=x.ZP.input(k||(k=(0,m.Z)(["\n  min-width: 200px;\n"]))),P=x.ZP.button(j||(j=(0,m.Z)(["\n  margin-left: 10px;\n"])));var U=function(e){var r=e.onSubmit,t=e.defValue,n=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,r="",t=crypto.getRandomValues(new Uint8Array(e));e--;){var n=63&t[e];r+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return r}(5);return(0,w.jsxs)(S,{onSubmit:r,children:[(0,w.jsx)(_,{htmlFor:n,children:"Movie name:"}),(0,w.jsx)(L,{id:n,type:"text",name:"query",placeholder:"Search query",defaultValue:t,required:!0}),(0,w.jsx)(P,{type:"submit",children:"Search"})]})};var C=function(){var e,r,t,n=(0,p.TH)(),i=(0,s.lr)(),h=(0,u.Z)(i,2),v=h[0],m=h[1],x=null!==(e=null!==(r=v.get("query"))&&void 0!==r?r:new URLSearchParams(null===(t=n.state)||void 0===t?void 0:t.from.search).get("query"))&&void 0!==e?e:"",g=(0,c.useCallback)((0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==x){e.next=2;break}return e.abrupt("return",[]);case 2:return m({query:x},{replace:!0}),e.abrupt("return",(0,l.ad)(x));case 4:case"end":return e.stop()}}),e)}))),[x,m]),b=(0,f.Z)({callback:g,initData:[]}),Z=b.data,y=b.isLoaded,k=b.Loader;return Z=(0,l.m5)(Z),(0,w.jsxs)(d.Z,{title:"Find movies",children:[(0,w.jsx)(U,{onSubmit:function(e){e.preventDefault();var r=e.currentTarget.elements.query.value;v.get("query")!==r&&m({query:r},{replace:!0})},defValue:x}),y&&(0,w.jsx)(q,{items:Z,state:{from:n}}),(0,w.jsx)(k,{})]})}},4390:function(e,r,t){t.d(r,{Hx:function(){return m},UR:function(){return w},Y5:function(){return f},ad:function(){return p},m5:function(){return g},ss:function(){return c},xc:function(){return h}});var n=t(5861),a=t(7757),u=t.n(a),i=t(4569),o=t.n(i)().create({method:"get",baseURL:"https://api.themoviedb.org/3",params:{api_key:"157707c22d4cc8eeebe0477c49922db6",page:1}});function c(){return s.apply(this,arguments)}function s(){return(s=(0,n.Z)(u().mark((function e(){var r,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({url:"/trending/movie/day"});case 3:return r=e.sent,t=r.data,e.abrupt("return",t.results);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0.message),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function p(e){return l.apply(this,arguments)}function l(){return(l=(0,n.Z)(u().mark((function e(r){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({url:"/search/movie",params:{query:r}});case 3:if(t=e.sent,0!==(n=t.data).results.length){e.next=7;break}throw new Error('Not found for request: "'.concat(r,'"'));case 7:return e.abrupt("return",n.results);case 10:throw e.prev=10,e.t0=e.catch(0),console.error(e.t0.message),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=(0,n.Z)(u().mark((function e(r){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({url:"/movie/".concat(r)});case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0.message),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=(0,n.Z)(u().mark((function e(r){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({url:"/movie/".concat(r,"/credits")});case 3:return t=e.sent,n=t.data,e.abrupt("return",n.cast.slice(0,15));case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0.message),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function m(e){return x.apply(this,arguments)}function x(){return(x=(0,n.Z)(u().mark((function e(r){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({url:"/movie/".concat(r,"/reviews")});case 3:if(t=e.sent,0!==(n=t.data).results.length){e.next=7;break}throw new Error("We don`t have any reviews for this movie");case 7:return e.abrupt("return",n.results);case 10:throw e.prev=10,e.t0=e.catch(0),console.error(e.t0.message),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function g(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map((function(e){return{key:e.id,label:e.title,toLink:"".concat(r).concat(e.id)}}))}var w="https://image.tmdb.org/t/p/w500"}}]);
//# sourceMappingURL=movies.aac62a01.chunk.js.map